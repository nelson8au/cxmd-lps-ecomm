"use strict";$(function(){function n(){var i=0<arguments.length&&void 0!==arguments[0]?arguments[0]:2,e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"create_time",t=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"DESC",a=3<arguments.length&&void 0!==arguments[3]?arguments[3]:"all",s=4<arguments.length&&void 0!==arguments[4]?arguments[4]:0,o=5<arguments.length&&void 0!==arguments[5]?arguments[5]:1,d=arguments[7],n=$("input#show_view").val(),l=$("input#show_sale").val(),c=($("input#show_marking_price").val(),$("input#show_favorites").val()),r="";$.get(v+"?status=1&type="+a+"&category_id="+s+"&rows="+i+"&order_field="+e+"&order_type="+t,function(i){i.code&&(i.data&&$.each(i.data.data,function(i,e){1==o&&(r+='<div class="item">',r+='<div class="image"><img src="'+e.cover_200+'" /></div>',r+='<div class="content">',r+='<div class="title h3 text-ellipsis">'+e.title+"</div>",r+='<div class="description text-ellipsis">'+e.description+"</div>",r+='<div class="price"><span class="score">'+e.price+"</span></div>",r+='<div class="info">',r+='<div class="type">',1==n&&(r+='<div class="view">',r+='    <i class="fa fa-eye" aria-hidden="true"></i> '+e.view,r+="</div>"),1==l&&(r+='<div class="shopping">',r+='   <i class="fa fa-shopping-bag" aria-hidden="true"></i> '+e.sell_num,r+=" </div>"),1==c&&(r+=' <div class="favorites">',r+='   <i class="fa fa-star-o" aria-hidden="true"></i> ',r+='   <span class="favorites-num">'+e.favorite+"</span>",r+="</div>"),r+="</div>",r+="</div>",r+="</div>",r+="</div>"),0==o&&(r+='<div class="item">',r+='<div class="image"><img src="'+e.cover_200+'" /></div>',r+='<div class="content">',r+='<div class="title h3 text-ellipsis">'+e.title+"</div>",r+='<div class="description text-ellipsis">'+e.description+"</div>",r+='<div class="price"><span class="score">'+e.price+"</span></div>",r+='<div class="info">',r+='<div class="type">',1==l&&(r+='<div class="shopping">',r+='   <i class="fa fa-shopping-bag" aria-hidden="true"></i> '+e.sell_num,r+=" </div>"),1==c&&(r+=' <div class="favorites">',r+='   <i class="fa fa-star-o" aria-hidden="true"></i> ',r+='   <span class="favorites-num">'+e.favorite+"</span>",r+="</div>"),r+="</div>",r+="</div>",r+="</div>",r+="</div>")}),1==o?($(d).find(".scoreshop-goods-list-preview .list").removeClass("rank0"),$(d).find(".scoreshop-goods-list-preview .list").addClass("rank1")):($(d).find(".scoreshop-goods-list-preview .list").removeClass("rank1"),$(d).find(".scoreshop-goods-list-preview .list").addClass("rank0")),$(d).find(".scoreshop-goods-list-preview .list").html(r))})}var l,e,v=$('.btn-object[data-type="scoreshop_goods_list"]').data("list-api"),t=$('.btn-object[data-type="scoreshop_goods_list"]').data("category-api");$(".page-diy-mobile-section").on("click",'.object-item[data-type="scoreshop_goods_list"]',function(i){$(".object-item").find(".diy-preview-controller").removeClass("show"),$(this).find(".diy-preview-controller").addClass("show"),l=$(this).data("object-index"),e=$(this).data("type"),$(".page-diy-mobile-section").on("click",'[data-object-index="'+l+'"] .btn',function(i){i.stopPropagation();var e=$('[data-object-index="'+l+'"] input[name="rows"]').val(),t=$('[data-object-index="'+l+'"] select[name="order_field"]').val(),a=$('[data-object-index="'+l+'"] select[name="order_type"]').val(),s=$('[data-object-index="'+l+'"] select[name="knowledge_type"]').val(),o=$('[data-object-index="'+l+'"] select[name="category_id"]').val(),d=$('[data-object-index="'+l+'"] select[name="rank"]').val(),i=$('[data-object-index="'+l+'"] select[name="style"]').val();n(e,t,a,s,o,d,i,"[data-object-index="+l+"]")}),$(".page-diy-mobile-section").on("input propertychange",'[data-object-index="'+l+'"] input[name="title"]',function(){$('[data-object-index="'+l+'"] .title h3').html($(this).val())}),$(".page-diy-mobile-section").on("click",'[data-object-index="'+l+'"] .diy-preview-controller',function(i){i.stopPropagation()});var a="";$.get(t,function(i){var t;i.code&&(t=$('[data-object-index="'+l+'"] select[name="category_id"]').data("category-id"),a=0==t?'<option value="0" selected>ALL</option>':'<option value="0">ALL</option>',$.each(i.data,function(i,e){t==e.id?a+='<option value="'+e.id+'" selected>'+e.title+"</option>":a+='<option value="'+e.id+'">'+e.title+"</option>",e._child&&$.each(e._child,function(i,e){t==e.id?a+='<option value="'+e.id+'" selected>----'+e.title+"</option>":a+='<option value="'+e.id+'">----'+e.title+"</option>"})}),$('[data-object-index="'+l+'"] select[name="category_id"]').html(a))})}),$(".page-diy-mobile-section .object-lists").on("click",'.btn-object[data-type="scoreshop_goods_list"]',function(){e=$(this).data("type");var i=$('[data-object-type="'+e+'"]').html();console.log(e),$(".preview-target").append(i),$(".preview-target .object-item").each(function(i){var e=$(this).data("type");$(this).attr("data-object-index",e+"-"+i),l=e+"-"+i}),n(2,"create_time","ASC","all",0,1,0,"[data-object-index="+l+"]")})});